!function($){$.fn.Merlin=function(options){function jsonDecode(json,method){var func=method||function(a,b){return b},each=function(a){for(i in a){a[i]=func(i,a[i]);switch(typeof a[i]){case"undefined":delete a[i];break;case"object":a[i]=each(a[i])}}return a};return each(eval("("+json+")"))}function bindEvents(a,b,c){a=$(a),$.each(b,function(b,d){$.each(c,function(b,c){a[d].call(a,b,c)})})}function isIe6(){return $.browser.msie&&$.browser.version=="6.0"}this.trHover=function(a){var b={eType:"on",trList:".list-tr",trMCVal:!1,trMCName:"tr-hover"},c=$.extend({},b,a),d=this.find(c.trList),e=c.eType==="on"?["on"]:["die","live"];return bindEvents(d,e,{mouseenter:function(){c.trMCVal?$(this).css("backgroundColor",c.trMCVal):$(this).addClass(c.trMCName)},mouseleave:function(){c.trMCVal?$(this).css("backgroundColor",""):$(this).removeClass(c.trMCName)}}),this},this.interlaced=function(a){var b={trList:".list-tr",iColorVal:!1,iClassName:"tr-blue"},c=$.extend({},b,a),d=this.find(c.trList);return d.each(function(a){a%2===0&&(c.iColorVal?$(this).css("backgroundColor",c.iColorVal):$(this).addClass(c.iClassName))}),this},this.tablePullDown=function(a){var b={eType:"on",derail:".pull-down .arrow",select:".table-select",item:"li",itemCls:"table-li-hover"},c=$.extend({},b,a),d=$(c.derail),e=c.eType==="on"?["on"]:["die","live"];return bindEvents(d,e,{click:function(){var a=$(this),b=a.parent(),d=b.find(c.select),e=d.find(c.item);a.data("index")?(b.removeClass("table-up"),d.slideUp(),a.data("index",0)):(b.addClass("table-up"),d.slideDown(),a.data("index",1)),b.on("mouseleave",function(){b.removeClass("table-up"),d.hide(),a.data("index",0)}),e.hover(function(){$(this).addClass(c.itemCls)},function(){$(this).removeClass(c.itemCls)})}}),this},this.checkAll=function(a){var b={eType:"on",checkAll:'input[name="checkAll"]',checkSub:'input[name="checkSub"]'},c=$.extend({},b,a),d=$(c.checkAll),e=$(c.checkSub),f=c.eType==="on"?["on"]:["die","live"];return bindEvents(d,f,{click:function(){e.prop("checked",this.checked),$(c.checkAll).prop("checked",this.checked)}}),bindEvents(e,f,{change:function(){var a=$(this);setTimeout(function(){var b=a.closest("tbody").find('input[type="checkbox"]'),d=b.filter("input:checked").length,e=b.length;d===e?$(c.checkAll).prop("checked",!0):$(c.checkAll).prop("checked",!1)},0)}}),this},this.fixedTableHead=function(a){function j(a){a>=g?(h.show(),isIe6()&&h.css("top",a)):h.hide()}var b={id:"gaugeOutfit",className:"table-data"},c=$.extend({},b,a),d=$(window,document),e=this,f=e.find("thead"),g=e.offset().top,h=$("#"+c.id)||"";if(parseInt(h.length)===0){var i='<table id="'+c.id+'" class="'+c.className+'" style="display:none; height:'+f.height()+"px; left:"+e.offset().left+"px; top:0; width:"+e.outerWidth()+'px;">';i+="<thead>"+f.html()+"</thead>",i+="</table>",$("body").append(i),h=$("#"+c.id),isIe6()?h.css("position","absolute"):h.css("position","fixed")}return d.on({scroll:function(){j(parseFloat($(this).scrollTop()))},resize:function(){h.length&&h.css("left",e.offset().left)}}),this},this.foldingTable=function(a){var b={derail:".item-list",content:".detail-list"},c=$.extend({},b,a),d=$(c.derail);return d.on("click",function(){var a=$(this),b=a.next(),d=b.find(c.content);d.is(":hidden")?d.slideDown(400):d.slideUp(400)}),this},this.inputFocus=function(a){var b={textCls:"input-text",focusCls:"input-focus",errorCls:"input-error",defaultCls:"input-default",setDefault:!1,dataAttribute:"data-default"},c=$.extend({},b,a);return c.setDefault&&this.val(this.attr(c.dataAttribute)).addClass(c.defaultCls),this.on({focus:function(){var a=$(this);a.addClass(c.focusCls),c.setDefault&&a.val()===a.attr(c.dataAttribute)&&a.val("").removeClass(c.defaultCls)},blur:function(){var a=$(this);a.removeClass(c.focusCls),c.setDefault&&$.trim(a.val())===""&&a.val(a.attr(c.dataAttribute)).addClass(c.defaultCls)}}),this},this.importInput=function(a){var b={default_box:".key"},c=$.extend({},b,a),d=$(this),e=$(c.default_box);return d.on("keyup",function(){parseInt($.trim($(this).val()).length)>0?e.hide():e.show()}),this},this.tabSwitcher=function(a){var b={startIndex:0,activeCls:"cur",tabCls:".tab",itemCls:".tab-item",delay:0,duration:5e3,autoPlay:!1,trigger:"click",effect:!1,evt:null},c=$.extend({},b,a);return c.trigger=c.trigger=="hover"?"mouseenter":c.trigger,this.each(function(){function h(a){a!=e&&(b.eq(e).removeClass(c.activeCls),d.eq(e).hide(),c.effect?c.effect=="slide"?d.eq(a).fadeIn({queue:!1,duration:300}):d.eq(a).fadeIn({queue:!1,duration:300}):d.eq(a).show(),b.eq(a).addClass(c.activeCls),e=a,c.onShow&&c.onShow.apply(this,[e,b,d]),typeof c.evt=="function"&&c.evt.call(this))}function i(){var a=e>=b.length-1?0:e+1;h(a)}function j(){g=setInterval(function(){i()},c.duration)}var a=$(this),b=a.find(c.tabCls),d=a.find(c.itemCls),e=-1,f,g;d.hide(),h(c.startIndex),c.autoPlay&&(j(),a.hover(function(){g&&clearTimeout(g)},function(){j()})),b.each(function(a,b){c.delay>0?$(b).hover(function(){f=setTimeout(function(){h(a)},c.delay)},function(){f&&clearTimeout(f)}):$(b).on(c.trigger,function(){h(a)})})}),this},this.timing=function(a){var b={time:3,tag:"",closed:"hide",url:"",callback:null},c=$.extend({},b,a),d=null,e=$(this);if(c.tag!=""){var f=e.find(c.tag);f.text(c.time)}return d=setInterval(function(){if(c.time>1)c.tag!=""?f.text(--c.time):--c.time;else{clearInterval(d);switch(c.closed){case"hide":e.hide();break;case"remove":e.remove();break;case"refresh":window.location.href=c.url?c.url:window.location.href;break;case"custom":c.callback.call(this)}}},1e3),this},this.countDown=function(a){var b={startTime:this.attr("data-start")||0,endTime:this.attr("data-end")||0,nowTime:this.attr("data-now")||0,interval:1e3,minDigit:!0,showDay:!0,timeUnitCls:{day:"cmp-d",hour:"cmp-h",min:"cmp-m",sec:"cmp-s"},startTips:"",endTips:"",stopTips:"",timeStamp:!0,timeStampTow:!1,callback:null},c=$.extend({},b,a);return this.each(function(){function h(a,b){return a?b<10?b="0"+b:b:b}var a=null,b=$(this),d=$("<span></span>"),e,f=isNaN(c.startTime)?Date.parse(c.startTime.replace(/-/g,"/"))/1e3:Math.round(c.startTime),g=isNaN(c.endTime)?Date.parse(c.endTime.replace(/-/g,"/"))/1e3:Math.round(c.endTime);e=c.nowTime==0?Math.round((new Date).getTime()/1e3):Math.round(c.nowTime);var i={day:"",hour:"",min:"",sec:""};c.timeStamp&&(i={day:"天",hour:"时",min:"分",sec:"秒"}),function j(){var k={},l,m="";l=e<f?f-e:g-e,b.html(""),c.showDay?(k.day=h(c.minDigit,Math.floor(l/3600/24)),k.hour=h(c.minDigit,Math.floor(l/3600%24))):k.hour=h(c.minDigit,Math.floor(l/3600)),k.min=h(c.minDigit,Math.floor(l/60%60)),k.sec=h(c.minDigit,Math.floor(l%60));if(e<f)c.startTips&&(m=c.startTips);else if(g>e)c.endTips&&(m=c.endTips);else{if(c.stopTips)m=c.stopTips,b.html(m),typeof c.callback=="function"&&c.callback.call(this);else for(var n in k){if(n=="day"&&!c.showDay)continue;k[n]=0,d.clone().addClass(c.timeUnitCls[n]).text(c.timeStampTow?"<i>"+k[n]+"</i>"+i[n]:k[n]+i[n]).appendTo(b)}return clearTimeout(a),!1}b.html(m);for(var n in k){if(n=="day"&&!c.showDay)continue;d.clone().addClass(c.timeUnitCls[n]).html(c.timeStampTow?"<i>"+k[n]+"</i>"+i[n]:k[n]+i[n]).appendTo(b)}e+=c.interval/1e3,a=setTimeout(function(){j()},c.interval)}()})},this.slider=function(a){function j(){d>=g.length&&(d=0),i.removeClass(c.active_class).eq(d).addClass(c.active_class);switch(c.effect){case"x":f.width(g.length*g.width()),f.stop().animate({left:-parseFloat(g.width())*d},c.speed);break;case"y":g.css("display","block"),f.stop().animate({top:-parseFloat(g.height())*d},c.speed);break;case"fade":g.eq(e).stop().animate({opacity:0},c.speed/2).css("z-index",1).end().eq(d).css("z-index",9).stop().animate({opacity:1},c.speed/2);break;case"none":g.hide().eq(d).show()}e=d,d++,typeof c.callback=="function"&&c.callback.call(this)}function l(){clearInterval(k)}function m(){c.auto&&(k=setInterval(j,c.space))}var b={effect:"x",speed:600,space:5e3,auto:!0,trigger:"mouseenter",content_box:".contents",content_tag:"li",switcher_box:".switchers",switcher_tag:"li",active_class:"active",prev:"prev",next:"next",rand:!1,callback:null},c=$.extend({},b,a),d=1,e=0,f=$(this).find(c.content_box),g=f.find(c.content_tag),h=$(this).find(c.switcher_box),i=h.find(c.switcher_tag);c.rand&&(d=Math.floor(Math.random()*g.length),j()),c.effect=="fade"&&$.each(g,function(a,b){a===0?$(this).css({position:"absolute","z-index":9}):$(this).css({position:"absolute","z-index":1,opacity:0})}),c.trigger=c.trigger==="mouseover"||c.trigger==="hover"?"mouseenter":c.trigger,i.on(c.trigger,function(){l(),d=$(this).index(),j(),m()}),$(this).find(".arrow").on("click",function(a){l(),a||(a=window.event);if(a.target.className==c.prev){if(!e)return!1;d=--e,j()}a.target.className==c.next&&j(),m()});if(c.auto)var k=setInterval(j,c.space);return f.hover(l,m),this};var $parent=this;return $.each(options,function(a,b){$parent[a](b)}),this}}(jQuery)